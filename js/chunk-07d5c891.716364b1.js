(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07d5c891"],{"16f1":function(e,t,r){},"2afb":function(e,t,r){"use strict";r("16f1")},3675:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return u}));var a=r("41cb");function i(e){var t=e.year,r=e.month,a=e.date,i="";return t&&(i+="/".concat(t)),r&&(i+="/".concat(r)),a&&(i+="/".concat(a)),i}function n(e){var t=i(e);return Object(a["a"])().get("/api/cms/calendar/archive"+t)}function o(e){var t=i(e);return Object(a["a"])().post("/api/cms/calendar/archive"+t,e)}function l(e,t){return Object(a["a"])().put("/api/cms/calendar/".concat(e),t)}function s(e){return Object(a["a"])().delete("/api/cms/calendar/".concat(e))}function c(e){return Object(a["a"])().get("/api/cms/calendar/".concat(e))}function u(e,t){var r=i(e);return Object(a["a"])().get("/api/cms/calendar/history/".concat(r),{params:t})}},"5e82":function(e,t,r){},"857a":function(e,t,r){var a=r("e330"),i=r("1d80"),n=r("577e"),o=/"/g,l=a("".replace);e.exports=function(e,t,r,a){var s=n(i(e)),c="<"+t;return""!==r&&(c+=" "+r+'="'+l(n(a),o,"&quot;")+'"'),c+">"+s+"</"+t+">"}},"864b":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.value},on:{close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[r("header",[e._v(e._s(e.title))])]},proxy:!0},{key:"footer",fn:function(){return[r("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"medium",loading:e.loading},on:{click:e.confirm}},[e._v("确认")])]},proxy:!0}])},[r("main",{staticClass:"u-form"},[r("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[r("el-form-item",{attrs:{label:"日期",required:"",error:e.dateError}},[r("div",{staticClass:"m-date"},[r("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入年份",min:2009,max:e.maxYear,size:"medium"},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",e._n(t))},expression:"form.year"}}),r("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入月份",min:1,max:12,size:"medium"},model:{value:e.form.month,callback:function(t){e.$set(e.form,"month",e._n(t))},expression:"form.month"}}),r("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入日期",min:1,max:31,size:"medium"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",e._n(t))},expression:"form.date"}})],1)]),r("el-form-item",{attrs:{label:"类型",required:""}},[r("div",{staticClass:"m-type"},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-radio-button",{attrs:{label:1}},[e._v("事件")]),r("el-radio-button",{attrs:{label:2}},[e._v("活动")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:2===e.form.type,expression:"form.type === 2"}],staticClass:"m-type-icon"},[r("el-input",{attrs:{placeholder:"图标ID",minlength:1,maxlength:10,max:3e4,min:0},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[r("template",{slot:"prepend"},[r("img",{staticClass:"u-icon",attrs:{src:e.iconLink(e.form.icon)}})])],2)],1)],1)]),r("el-form-item",{attrs:{label:"描述",required:"",error:e.descError}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"输入事件描述"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),r("el-form-item",{attrs:{label:"客户端",required:""}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.form.client,callback:function(t){e.$set(e.form,"client",t)},expression:"form.client"}},[r("el-radio-button",{attrs:{label:"std"}},[e._v("正式服")]),r("el-radio-button",{attrs:{label:"origin"}},[e._v("怀旧服")])],1)],1),r("el-form-item",{attrs:{label:"参考资料"}},[e._l(e.form.link,(function(t,a){return[r("div",{key:t.id||a,staticClass:"m-links"},[r("el-input",{staticClass:"u-link-item",attrs:{placeholder:"请输入标题"},model:{value:t.label,callback:function(r){e.$set(t,"label",r)},expression:"item.label"}}),r("el-input",{staticClass:"u-link-item",attrs:{placeholder:"请输入链接"},model:{value:t.url,callback:function(r){e.$set(t,"url",r)},expression:"item.url"}}),r("el-button",{staticClass:"u-del-icon",attrs:{type:"text",icon:"el-icon-circle-close",title:"删除参考资料"},on:{click:function(t){return e.removeLink(a)}}})],1)]})),r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:e.addDisabled},on:{click:e.addLink}},[e._v("添加")])],2),e.isEditor&&e.isEditmode?[r("el-form-item",{attrs:{label:"置顶显示"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.form.is_top,callback:function(t){e.$set(e.form,"is_top",t)},expression:"form.is_top"}},[r("el-radio-button",{attrs:{label:0}},[e._v("否")]),r("el-radio-button",{attrs:{label:1}},[e._v("是")])],1)],1),r("el-form-item",{attrs:{label:"重要级别"}},[r("el-input-number",{attrs:{size:"medium"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}})],1),r("el-form-item",{attrs:{label:"样式"}},[r("div",{staticClass:"m-style"},[r("el-select",{attrs:{size:"medium",placeholder:"请选择样式"},model:{value:e.form.style,callback:function(t){e.$set(e.form,"style",t)},expression:"form.style"}}),r("div",{staticClass:"m-color-item"},[r("label",{staticClass:"u-label"},[e._v("背景色")]),r("span",{directives:[{name:"show",rawName:"v-show",value:e.form.bgcolor,expression:"form.bgcolor"}],staticClass:"u-color-value"},[e._v("【"+e._s(e.form.bgcolor)+"】")]),r("el-color-picker",{attrs:{size:"small",predefine:e.predefineColors},model:{value:e.form.bgcolor,callback:function(t){e.$set(e.form,"bgcolor",t)},expression:"form.bgcolor"}})],1),r("div",{staticClass:"m-color-item"},[r("label",{staticClass:"u-label"},[e._v("颜色")]),r("span",{directives:[{name:"show",rawName:"v-show",value:e.form.color,expression:"form.color"}],staticClass:"u-color-value"},[e._v("【"+e._s(e.form.color)+"】")]),r("el-color-picker",{attrs:{size:"small",predefine:e.predefineColors},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1)],1)]),r("el-form-item",{attrs:{label:"海报"}},[r("img-upload",{attrs:{data:e.form.banner,filed:"banner"},on:{update:e.setMeta}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("img-upload",{attrs:{data:e.form.img,filed:"img"},on:{update:e.setMeta}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{size:"medium",placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),r("el-form-item",{attrs:{label:"操作"}},[r("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small",type:"warning"},on:{click:e.recheck}},[e._v("复审")]),r("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger"},on:{click:e.del}},[e._v("删除")])],1)]:e._e()],2)],1)])},i=[];r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("caad"),r("2532"),r("9911f"),r("a434");var s=r("3675"),c=r("c9d2"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-publish-banner"},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.url,"show-file-list":!1,"on-success":e.done,"on-error":e.fail,"with-credentials":"",accept:"image/jpg,image/jpeg,image/gif,image/png,image/bmp"}},[e.banner?r("img",{attrs:{src:e._f("showBanner")(e.banner)}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),r("el-button",{staticClass:"u-remove",attrs:{type:"info",size:"mini",icon:"el-icon-circle-close"},on:{click:e.clearBanner}},[e._v("移除图片")])],1)},m=[],f=(r("99af"),r("65c2")),d=r("85e4"),p=f["__cms"],b=p+"api/cms/upload",h={name:"post_banner",props:["filed","data"],data:function(){return{banner:this.data,url:b}},model:{prop:"data",event:"update"},watch:{data:function(e){this.banner=e},banner:function(e){this.$emit("update",{key:this.filed,val:e})}},methods:{done:function(e,t){this.banner=(null===e||void 0===e?void 0:e.data[0])||""},fail:function(e,t,r){try{var a=JSON.parse(e.message);this.$message.error("[".concat(a.code,"]").concat(a.msg))}catch(i){this.$message.error("网络请求异常")}},clearBanner:function(){this.banner=""}},filters:{showBanner:d["showBanner"]}},v=h,g=(r("9aa7"),r("2877")),k=Object(g["a"])(v,u,m,!1,null,null,null),y=k.exports,O=r("b288"),_={year:2022,month:3,date:16,type:1,desc:"",client:location.href.includes("origin")?"origin":"std",link:[],is_top:0,level:0,remark:"",banner:"",bgcolor:"",color:"",img:"",style:"",icon:""},w={name:"calendar_dialog",components:{"img-upload":y},props:["value","dateObj","selected","mode"],data:function(){return{form:l({},Object.assign({},_,this.dateObj)),dateError:"",descError:"",loading:!1,predefineColors:O}},computed:{isEditmode:function(){return"update"==this.mode},title:function(){return this.isEditmode?"编辑":"新增"},maxYear:function(){return(new Date).getFullYear()+1},addDisabled:function(){var e,t;return(null===(e=this.form)||void 0===e||null===(t=e.link)||void 0===t?void 0:t.length)>=10},isEditor:function(){return c["a"].isEditor()}},watch:{selected:{deep:!0,immediate:!0,handler:function(e){e?(this.form=e,this.form.link||(this.form.link=[],this.form.link.push({label:"官网新闻",url:e.link_temp}))):this.form=Object.assign({},_,this.dateObj)}},dateObj:{deep:!0,handler:function(e){if(e)for(var t in e)this.form[t]=e[t]}}},methods:{addLink:function(){var e,t;null===(e=this.form)||void 0===e||null===(t=e.link)||void 0===t||t.push({url:"",label:"",id:+new Date})},removeLink:function(e){var t,r;null===(t=this.form)||void 0===t||null===(r=t.link)||void 0===r||r.splice(e,1)},validate:function(){if(this.form){var e=this.form,t=e.year,r=e.month,a=e.date,i=e.desc;t?(this.dateError="",this.dateError=r?a?"":"请输入日期":"请输入月份"):this.dateError="请输入年份",this.descError=i?"":"请输入事件描述"}},reset:function(){this.$emit("input",!1),this.form="",this.dateError="",this.descError=""},cancel:function(){this.$emit("input",!1)},confirm:function(){var e=this;if(this.validate(),!this.descError&&!this.dateError){this.loading=!0;var t=this.isEditmode?this.put:this.post;t().then((function(){e.reset()})).finally((function(){e.loading=!1}))}},post:function(){var e=this;return Object(s["a"])(this.form).then((function(t){e.$emit("update",t),e.reset()}))},put:function(){var e=this;return Object(s["f"])(this.selected.id,this.form).then((function(t){e.$emit("update"),e.reset()}))},del:function(){var e=this;Object(s["b"])(this.selected.id).then((function(){e.$emit("del",e.selected.id),e.$notify({type:"success",title:"删除成功",message:"日历记录已删除"})}))},recheck:function(){var e=this;Object(s["f"])(this.selected.id,{status:0}).then((function(){e.$notify({type:"success",title:"操作成功",message:"日历记录已设为待审核"}),e.$emit("del",e.selected.id)}))},setMeta:function(e){var t=e.key,r=e.val;this.form[t]=r},iconLink:d["iconLink"]}},x=w,j=(r("2afb"),Object(g["a"])(x,a,i,!1,null,null,null));t["a"]=j.exports},"9911f":function(e,t,r){"use strict";var a=r("23e7"),i=r("857a"),n=r("af03");a({target:"String",proto:!0,forced:n("link")},{link:function(e){return i(this,"a","href",e)}})},"9aa7":function(e,t,r){"use strict";r("5e82")},af03:function(e,t,r){var a=r("d039");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b288:function(e){e.exports=JSON.parse('["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"]')},dbb4:function(e,t,r){var a=r("23e7"),i=r("83ab"),n=r("56ef"),o=r("fc6a"),l=r("06cf"),s=r("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,r,a=o(e),i=l.f,c=n(a),u={},m=0;while(c.length>m)r=i(a,t=c[m++]),void 0!==r&&s(u,t,r);return u}})},e439:function(e,t,r){var a=r("23e7"),i=r("d039"),n=r("fc6a"),o=r("06cf").f,l=r("83ab"),s=i((function(){o(1)})),c=!l||s;a({target:"Object",stat:!0,forced:c,sham:!l},{getOwnPropertyDescriptor:function(e,t){return o(n(e),t)}})}}]);
//# sourceMappingURL=chunk-07d5c891.716364b1.js.map