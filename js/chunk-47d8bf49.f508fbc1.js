(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47d8bf49"],{"16f1":function(t,e,i){},"2afb":function(t,e,i){"use strict";i("16f1")},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("b64b"),i("a4d3"),i("4de4"),i("d3b7"),i("e439"),i("159b"),i("dbb4");function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},"637b":function(t,e,i){},"857a":function(t,e,i){var n=i("e330"),a=i("1d80"),r=i("577e"),s=/"/g,o=n("".replace);t.exports=function(t,e,i,n){var l=r(a(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+o(r(n),s,"&quot;")+'"'),c+">"+l+"</"+e+">"}},"864b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.value},on:{close:t.cancel},scopedSlots:t._u([{key:"title",fn:function(){return[i("header",[t._v(t._s(t.title))])]},proxy:!0},{key:"footer",fn:function(){return[i("el-button",{attrs:{size:"medium"},on:{click:t.cancel}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"medium",loading:t.loading},on:{click:t.confirm}},[t._v("确认")])]},proxy:!0}])},[i("main",{staticClass:"u-form"},[i("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"日期",required:"",error:t.dateError}},[i("div",{staticClass:"m-date"},[i("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入年份",min:2009,max:t.maxYear,size:"medium"},model:{value:t.form.year,callback:function(e){t.$set(t.form,"year",t._n(e))},expression:"form.year"}}),i("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入月份",min:1,max:12,size:"medium"},model:{value:t.form.month,callback:function(e){t.$set(t.form,"month",t._n(e))},expression:"form.month"}}),i("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入日期",min:1,max:31,size:"medium"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",t._n(e))},expression:"form.date"}})],1)]),i("el-form-item",{attrs:{label:"类型",required:""}},[i("div",{staticClass:"m-type"},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",t._n(e))},expression:"form.type"}},[i("el-radio-button",{attrs:{label:1}},[t._v("事件")]),i("el-radio-button",{attrs:{label:2}},[t._v("活动")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.form.type,expression:"form.type === 2"}],staticClass:"m-type-icon"},[i("el-input",{attrs:{size:"small",placeholder:"图标ID",minlength:1,maxlength:10,max:3e4,min:0},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",t._n(e))},expression:"form.icon"}},[i("template",{slot:"prepend"},[i("img",{staticClass:"u-icon",attrs:{src:t.iconLink(t.form.icon)}})])],2)],1)],1)]),i("el-form-item",{attrs:{label:"描述",required:"",error:t.descError}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"输入事件描述"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),i("el-form-item",{attrs:{label:"客户端",required:""}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.form.client,callback:function(e){t.$set(t.form,"client",e)},expression:"form.client"}},[i("el-radio-button",{attrs:{label:"std"}},[t._v("正式服")]),i("el-radio-button",{attrs:{label:"origin"}},[t._v("怀旧服")]),1==t.form.type?i("el-radio-button",{attrs:{label:"all"}},[t._v("双端")]):t._e()],1)],1),i("el-form-item",{attrs:{label:"参考资料"}},[t._l(t.form.link,(function(e,n){return[i("div",{key:e.id||n,staticClass:"m-links"},[i("el-input",{staticClass:"u-link-item",attrs:{placeholder:"请输入标题"},model:{value:e.label,callback:function(i){t.$set(e,"label",i)},expression:"item.label"}}),i("el-input",{staticClass:"u-link-item",attrs:{placeholder:"请输入链接"},model:{value:e.url,callback:function(i){t.$set(e,"url",i)},expression:"item.url"}}),i("el-button",{staticClass:"u-del-icon",attrs:{type:"text",icon:"el-icon-circle-close",title:"删除参考资料"},on:{click:function(e){return t.removeLink(n)}}})],1)]})),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:t.addDisabled},on:{click:t.addLink}},[t._v("添加")])],2),t.isEditor&&t.isEditmode?[i("el-divider",[i("i",{staticClass:"el-icon-coordinate"}),t._v(" 管理设置")]),i("el-form-item",{attrs:{label:"置顶显示"}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.form.is_top,callback:function(e){t.$set(t.form,"is_top",t._n(e))},expression:"form.is_top"}},[i("el-radio-button",{attrs:{label:0}},[t._v("否")]),i("el-radio-button",{attrs:{label:1}},[t._v("是")])],1)],1),i("el-form-item",{attrs:{label:"重要级别"}},[i("el-input-number",{attrs:{size:"medium",min:0,max:5},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",t._n(e))},expression:"form.level"}})],1),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),i("el-form-item",{attrs:{label:"操作"}},[i("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small",type:"warning"},on:{click:t.recheck}},[t._v("复审")]),i("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger"},on:{click:t.del}},[t._v("删除")])],1)]:t._e()],2)],1)])},a=[],r=i("5530"),s=(i("caad"),i("2532"),i("9911f"),i("a434"),i("d3b7"),i("3675")),o=i("c9d2"),l=i("b288"),c=i("85e4"),u={year:2022,month:3,date:16,type:1,desc:"",client:location.href.includes("origin")?"origin":"std",link:[],is_top:0,level:0,remark:"",banner:"",bgcolor:"",color:"",img:"",style:"",icon:0},d={name:"calendar_dialog",components:{},props:["value","dateObj","selected","mode","isSuper"],data:function(){return{form:Object(r["a"])({},Object.assign({},u,this.dateObj)),dateError:"",descError:"",loading:!1,predefineColors:l}},computed:{isEditmode:function(){return"update"==this.mode},title:function(){return this.isEditmode?"编辑":"新增"},maxYear:function(){return(new Date).getFullYear()+1},addDisabled:function(){var t,e;return(null===(t=this.form)||void 0===t||null===(e=t.link)||void 0===e?void 0:e.length)>=10},isEditor:function(){return o["a"].isEditor()}},watch:{selected:{deep:!0,immediate:!0,handler:function(t){t?(this.form=t,this.form.link||(this.form.link=[],this.form.link.push({label:"官网新闻",url:t.link_temp}))):this.form=Object.assign({},u,this.dateObj)}},dateObj:{deep:!0,handler:function(t){t&&(this.form=Object(r["a"])(Object(r["a"])({},this.form),t||{}))}}},methods:{addLink:function(){var t,e;null===(t=this.form)||void 0===t||null===(e=t.link)||void 0===e||e.push({url:"",label:"",id:+new Date})},removeLink:function(t){var e,i;null===(e=this.form)||void 0===e||null===(i=e.link)||void 0===i||i.splice(t,1)},validate:function(){if(this.form){var t=this.form,e=t.year,i=t.month,n=t.date,a=t.desc;e?(this.dateError="",this.dateError=i?n?"":"请输入日期":"请输入月份"):this.dateError="请输入年份",this.descError=a?"":"请输入事件描述"}},reset:function(){this.$emit("input",!1),this.form=Object.assign({},u,this.dateObj),this.dateError="",this.descError=""},cancel:function(){this.$emit("input",!1)},confirm:function(){var t=this;if(this.validate(),!this.descError&&!this.dateError){this.loading=!0;var e=this.isEditmode?this.put:this.post;e().then((function(){t.reset()})).finally((function(){t.loading=!1}))}},post:function(){var t=this;return Object(s["a"])(this.form).then((function(e){t.$notify({title:"提交成功",message:"请耐心等待审核",type:"success"}),t.$emit("update",e),t.reset()}))},put:function(){var t=this,e=this.isSuper?s["h"]:s["i"];return e(this.selected.id,this.form).then((function(e){t.$emit("update"),t.reset()})).then((function(){t.isSuper?t.$notify({title:"操作成功",message:"日历记录更新成功",type:"success"}):t.$notify({title:"提交成功",message:"请等待重新审核",type:"success"})}))},del:function(){var t=this;Object(s["b"])(this.selected.id).then((function(){t.$emit("del",t.selected.id),t.$notify({type:"success",title:"删除成功",message:"日历记录已删除"})}))},recheck:function(){var t=this;Object(s["h"])(this.selected.id,{status:0}).then((function(){t.$notify({type:"success",title:"操作成功",message:"日历记录已设为待审核"}),t.$emit("del",t.selected.id)}))},setMeta:function(t){var e=t.key,i=t.val;this.form[e]=i},iconLink:c["iconLink"]}},f=d,m=(i("2afb"),i("2877")),p=Object(m["a"])(f,n,a,!1,null,null,null);e["a"]=p.exports},"9911f":function(t,e,i){"use strict";var n=i("23e7"),a=i("857a"),r=i("af03");n({target:"String",proto:!0,forced:r("link")},{link:function(t){return a(this,"a","href",t)}})},af03:function(t,e,i){var n=i("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b288:function(t){t.exports=JSON.parse('["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"]')},cc1b:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-calendar-detail-item",on:{click:function(e){return t.view(t.data.id)}}},[i("div",{staticClass:"u-primary",attrs:{to:"/view/"+t.data.id}},[2==t.data.type?i("img",{staticClass:"u-icon",attrs:{src:t.iconLink(t.data.icon)}}):i("a",{staticClass:"u-author",attrs:{target:"_blank",href:t.authorLink(t.data.user_id),title:"由"+t.data.user_info.display_name+"贡献"},on:{click:function(t){t.stopPropagation()}}},[t.data&&t.data.user_info?i("img",{staticClass:"u-avatar",attrs:{src:t.showAvatar(t.data.user_info.user_avatar),alt:t.data.user_info.display_name}}):t._e()]),i("span",{staticClass:"u-desc",style:t.descStyle(t.data)},[1==t.data.type?i("i",{staticClass:"u-client",class:t.data.client},[t._v(t._s(t.getClientLabel(t.data.client).slice(0,1)))]):t._e(),t.data.is_top?i("i",{staticClass:"u-star"},[t._v("⭐️")]):t._e(),t._v(t._s(t.data.desc)+" ")])]),i("div",{staticClass:"u-actions"},[i("span",{staticClass:"u-action u-comment"},[i("i",{staticClass:"u-comment-icon el-icon-chat-dot-round"}),i("span",{staticClass:"u-comment-count"},[t._v("评论"),i("em",{staticClass:"u-count"},[t._v("("+t._s(t.data.comments_count||0)+")")])])]),i("span",{staticClass:"u-action u-reference"},[i("i",{staticClass:"u-reference-icon el-icon-connection"}),i("span",{staticClass:"u-reference-count"},[t._v("参考资料"),i("span",{staticClass:"u-count"},[t._v("("+t._s(t.getRefCount(t.data))+")")])])]),t.isEditor?i("span",{staticClass:"u-action u-edit",on:{click:function(e){return e.stopPropagation(),t.edit(t.data)}}},[i("i",{staticClass:"el-icon-edit-outline"}),i("span",{staticClass:"u-edit-text"},[t._v("编辑")])]):t._e()])])},a=[],r=(i("9911f"),i("85e4")),s=i("c9d2"),o=i("65c2"),l={name:"CalendarDetailItem",props:["type","data"],components:{},data:function(){return{}},computed:{isEditor:function(){return s["a"].isEditor()}},watch:{},methods:{view:function(t){this.$router.push("/view/".concat(t))},edit:function(t){this.$emit("edit",t)},authorLink:r["authorLink"],iconLink:r["iconLink"],showAvatar:r["showAvatar"],descStyle:function(t){var e=t.color;return e?{color:e,fontWeight:"bold"}:{}},getRefCount:function(t){var e;return null!==(e=t.link)&&void 0!==e&&e.length?t.link.length:t.link_temp?1:0},getClientLabel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"std";return o["__clients"][t]}}},c=l,u=(i("e003"),i("2877")),d=Object(u["a"])(c,n,a,!1,null,null,null);e["a"]=d.exports},dbb4:function(t,e,i){var n=i("23e7"),a=i("83ab"),r=i("56ef"),s=i("fc6a"),o=i("06cf"),l=i("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,i,n=s(t),a=o.f,c=r(n),u={},d=0;while(c.length>d)i=a(n,e=c[d++]),void 0!==i&&l(u,e,i);return u}})},e003:function(t,e,i){"use strict";i("637b")},e439:function(t,e,i){var n=i("23e7"),a=i("d039"),r=i("fc6a"),s=i("06cf").f,o=i("83ab"),l=a((function(){s(1)})),c=!o||l;n({target:"Object",stat:!0,forced:c,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(r(t),e)}})}}]);
//# sourceMappingURL=chunk-47d8bf49.f508fbc1.js.map