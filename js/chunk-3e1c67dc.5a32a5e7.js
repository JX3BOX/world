(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e1c67dc"],{"62d9":function(t,a,e){"use strict";e("b633")},b114:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-calendar-single"},[e("section",{staticClass:"m-actions"},[e("el-button",{attrs:{icon:"el-icon-arrow-left",size:"small"},on:{click:t.goBack}},[t._v("返回")]),e("el-button",{attrs:{icon:"el-icon-setting",type:"primary",size:"small"},on:{click:t.manage}},[t._v("管理")])],1),e("section",{directives:[{name:"loading",rawName:"v-loading",value:t.todayLoading,expression:"todayLoading"}],staticClass:"m-single-block m-today"},[e("header",{staticClass:"m-single-title m-history-header"},[e("i",{class:1==t.today.type?"el-icon-collection-tag":"el-icon-s-flag"}),t._v(t._s(1==t.today.type?"事件":"活动")+"记录")]),e("div",{staticClass:"m-today-content"},[e("i",{staticClass:"u-client",class:t.today.client},[t._v(t._s("std"==t.today.client?"正式服":"怀旧服"))]),t._v(t._s(t.today.desc)+" ")]),t.today&&t.today.user_info?e("div",{staticClass:"m-today-meta"},[e("span",{staticClass:"u-user"},[e("img",{attrs:{src:t.showAvatar(t.today.user_info.user_avatar),width:"24",height:"24",alt:""}}),e("a",{attrs:{href:t.authorLink(t.today.user_id),target:"_blank"}},[t._v(t._s(t.today.user_info.display_name))])]),e("span",{staticClass:"u-create-time",attrs:{title:"创建时间"}},[e("i",{staticClass:"el-icon-date"}),e("time",[t._v(t._s(t.showTime(t.today.created_at)))])])]):t._e()]),e("div",{staticClass:"m-single-block m-reference"},[t._m(0),t._l(t.references,(function(a,i){return e("div",{key:i,staticClass:"m-reference-item"},[e("label",{staticClass:"u-index"},[t._v(t._s(i+1)+".")]),e("a",{staticClass:"u-link",attrs:{href:a.url,target:"_blank"}},[t._v(t._s(a.label)+" "),e("i",{staticClass:"el-icon-link"})])])}))],2),e("section",{directives:[{name:"loading",rawName:"v-loading",value:t.historyLoading,expression:"historyLoading"}],staticClass:"m-single-block m-history"},[t._m(1),e("div",{staticClass:"m-history-content"},[e("el-timeline"),t._l(t.history,(function(a){return e("div",{key:a.id,staticClass:"m-history-item"},[e("time",{staticClass:"u-time"},[t._v(t._s(t.formatDate(a)))]),e("router-link",{staticClass:"u-desc",attrs:{to:"/detail/"+a.id}},[t._v(t._s(a.desc)+" "),e("i",{staticClass:"el-icon-link"})])],1)}))],2)]),e("Thx",{attrs:{postId:t.id,postType:"calendar",userId:t.author,adminBoxcoinEnable:!0,userBoxcoinEnable:!0}}),e("Comment",{staticClass:"m-comment",attrs:{id:t.id,category:"calendar"}}),e("calendar-dialog",{attrs:{"date-obj":t.dateObj,selected:t.today,mode:"update"},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}})],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("header",{staticClass:"m-single-title m-history-header"},[e("i",{staticClass:"el-icon-connection"}),t._v("参考资料")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("header",{staticClass:"m-single-title m-history-header"},[e("i",{staticClass:"el-icon-date"}),t._v("那年今日")])}],n=e("2909"),o=(e("9911f"),e("d3b7"),e("99af"),e("3675")),r=e("23d8"),c=e("864b"),l=e("9616"),d=e("85e4"),u=e("e4f1"),h={name:"SingleCalendar",components:{Comment:r["a"],"calendar-dialog":c["a"]},data:function(){return{today:"",history:{},todayLoading:!1,historyLoading:!1,visible:!1}},computed:{id:function(){return this.$route.params.id},author:function(){return this.today.user_id},params:function(t){var a=t.today;return a?{month:a.month,date:a.date}:""},dateObj:function(){return{year:this.today.year,month:this.today.month,date:this.today.date}},references:function(){var t=[],a=this.today,e=a.link,i=a.link_temp;a.desc;return e&&(t=Object(n["a"])(e)),i&&!t.some((function(t){return t.url===i}))&&t.push({label:"官方新闻",url:i}),t},timelineData:function(){var t;return t=this.history.reduce((function(t,a){var e=a.year;return t[e]||(t[e]=[]),t[e].push(a),t}),{}),t||{}}},watch:{id:{immediate:!0,handler:function(t){t&&this.loadData()}},params:{deep:!0,handler:function(t){t&&this.loadHistory(t)}}},methods:{loadData:function(){var t=this;this.todayLoading=!0,Object(o["d"])(this.id).then((function(a){t.today=a.data.data})).finally((function(){Object(l["b"])("calendar",t.id),t.todayLoading=!1}))},loadHistory:function(t){var a=this;this.historyLoading=!0,Object(o["e"])(t,{mode:"all"}).then((function(t){a.history=(t.data.data||[]).reverse()})).finally((function(){a.historyLoading=!1}))},goBack:function(){history.length?history.go(-1):this.$router.push("/archive/".concat(this.dateObj.year,"/").concat(this.dateObj.month))},manage:function(){this.visible=!0},formatDate:function(t){var a=t.year,e=t.month,i=t.date;return"".concat(a,"年").concat(e,"月").concat(i,"日")},showAvatar:function(t){return Object(d["showAvatar"])(t,24)},authorLink:d["authorLink"],showTime:u["b"]}},m=h,y=(e("62d9"),e("2877")),f=Object(y["a"])(m,i,s,!1,null,null,null);a["default"]=f.exports},b633:function(t,a,e){}}]);
//# sourceMappingURL=chunk-3e1c67dc.5a32a5e7.js.map