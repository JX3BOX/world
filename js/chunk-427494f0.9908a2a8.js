(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-427494f0"],{1441:function(t,e,i){"use strict";i("75e4")},"34f8":function(t,e,i){"use strict";i("b0c0"),i("ac1f"),i("841c");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-filter-wrap",class:"single"===t.$route.name?"can-return":""},[e("div",{staticClass:"m-return"},[e("el-button",{staticClass:"u-return-btn",on:{click:t.return_handle}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v("返回")])],1),e("div",{staticClass:"m-search-input"},[e("el-input",{attrs:{placeholder:"输入声望/地图/奖励/势力名称，「回车」进行搜索",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("span",{attrs:{slot:"prepend"},slot:"prepend"},[e("i",{staticClass:"el-icon-search"}),t._v(" 关键词 ")]),e("el-button",{attrs:{slot:"append"},on:{click:t.search},slot:"append"},[e("div",{staticClass:"u-input-button__normal"},[e("i",{staticClass:"el-icon-position"}),e("span",[t._v("搜索")])]),e("span",{staticClass:"u-input-button__small"},[e("i",{staticClass:"xs el-icon-search"})])])],1)],1)])},s=[],n=(i("14d9"),{name:"SearchInput",data:function(){return{keyword:""}},methods:{return_handle:function(){history.length<=1?this.$router.push({name:"reputation"}):history.back()},search:function(t){t&&this.$router.push({name:"result",query:{keyword:this.keyword}})}},mounted:function(){}}),o=n,r=(i("7fcd"),i("2877")),c=Object(r["a"])(o,a,s,!1,null,null,null);e["a"]=c.exports},4240:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-reputation-view"},[e("div",{staticClass:"m-search"},[e("search-input")],1),e("div",{staticClass:"m-reputation-content"},[e("div",{staticClass:"w-reputation"},[e("p",{staticClass:"u-title__warpper"},[e("span",{staticClass:"u-name-icon"},[e("img",{attrs:{src:t.getIcon(t.reputation.szIconPath)}})]),e("span",{staticClass:"u-title-desc"},[e("span",{staticClass:"u-title"},[e("span",{staticClass:"u-title-name"},[t._v(t._s(t.reputation.szName))]),e("span",{staticClass:"u-title-id"},[t._v(" (ID:"+t._s(t.reputation.dwForceID)+")")])]),e("span",{staticClass:"u-desc",domProps:{innerHTML:t._s(t.reputation.szDesc)}})])]),e("div",{staticClass:"u-other-info"},[e("p",{staticClass:"u-subtitle"},[t._v("【声望信息】")]),e("div",{staticClass:"other-wrap"},[t.reputation.szMapNames&&t.reputation.szMapNames.length?e("span",[t._v("地图："+t._s(t.reputation.szMapNames[0]))]):t._e(),t.reputation.GroupName?e("span",[t._v("势力："+t._s(t.reputation.GroupName))]):t._e(),t.getPath(t.reputation.szName)?e("span",[t._v("遗失的尊敬："+t._s(t.getPath(t.reputation.szName)))]):t._e()])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPath,expression:"showPath"}],staticClass:"u-path"},[e("p",{staticClass:"u-subtitle"},[t._v("【声望获取途径】")]),e("div",{staticClass:"u-path-list"},t._l(t.reputation.gainList,(function(i,a){return e("div",{key:a,staticClass:"path-item"},[e("p",{staticClass:"desc-title"},[t._v(t._s(i.level))]),e("p",{staticClass:"desc-info"},[t._v(t._s(i.desc))])])})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showReward,expression:"showReward"}],staticClass:"u-reward"},[e("p",{staticClass:"u-subtitle"},[t._v("【声望奖励】")]),e("div",{staticClass:"u-reward-list"},t._l(t.reputation.rewards,(function(t,i){return e("reward-item",{key:i,attrs:{reward:t}})})),1)])]),e("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[t.showDialog?e("el-tab-pane",{attrs:{label:"知交奖励",name:"dialog"}},[e("div",{staticClass:"u-reputation-dialog"},[e("servant-info",{attrs:{info:t.getServant(t.reputation.servant)}})],1)]):t._e(),t.showMap?e("el-tab-pane",{attrs:{label:"声望商人",name:"map"}},[e("div",{staticClass:"u-reputation-map"},[e("reputation-map",{ref:"map",attrs:{points:t.reputation.points}})],1)]):t._e()],1)],1),e("div",{staticClass:"m-comment"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("讨论")]),e("Comment",{attrs:{id:t.id,category:"reputation"}})],1)])},s=[],n=i("5530"),o=(i("7db0"),i("d3b7"),i("caad"),i("2532"),i("a9e3"),i("b0c0"),i("ac1f"),i("5319"),i("d81d"),i("99af"),i("b64b"),i("4de4"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-reputation-map"},[e("el-carousel",{ref:"carousel",attrs:{autoplay:!1,arrow:t.showArrow,height:"".concat(t.height,"px")}},t._l(t.points,(function(i){return e("el-carousel-item",{key:i.mapId},[e("div",{staticClass:"u-map__container",style:t.containerSize},[e("img",{staticClass:"u-map-img",attrs:{src:t.mapImgUrl(i.mapId),draggable:"false",alt:"声望商地图"}}),e("div",{staticClass:"u-map-tool"},[e("p",{staticClass:"u-map-name"},[t._v(t._s(t.mapName(i.mapId)))])]),i.guides.kind?[e("el-popover",{staticClass:"u-map-point__warpper",style:t.pointStyle(i.guides.positions,i.mapId),attrs:{placement:"top",trigger:"hover","popper-class":"u-map-point__popover","visible-arrow":!1}},[e("div",{staticClass:"u-map-point u-reputation-map-point",attrs:{slot:"reference"},slot:"reference"}),e("p",[t._v(t._s(i.guides.npcName))]),e("p",[t._v(t._s(t._f("coordinates")(i.guides.positions)))])])]:t._e()],2)])})),1)],1)}),r=[],c=i("bb16"),u=i("65c2"),l={name:"ReputationMap",props:{points:{type:Array}},data:function(){return{height:896,width:1024}},computed:{containerSize:function(){return{width:this.width+"px",height:this.height+"px"}},showArrow:function(){return Object.keys(this.points).length>1?"always":"never"}},methods:{mapImgUrl:function(t){return"".concat(u["__imgPath"],"map/maps/map_").concat(t,"_0.png")},mapName:function(t){return c["".concat(t)]?c["".concat(t)][0]["Name"]:"未知地图"},pointStyle:function(t,e){var i=c["".concat(e)];if(!i)return console.warn("未知的地图ID：".concat(e)),{};i=i[0];var a={left:"".concat((t[0]-i.StartX)*i.Scale*(this.width/1024),"px"),bottom:"".concat((t[1]-i.StartY)*i.Scale*(this.height/896),"px")};return a},updateSize:function(){this.width=this.$refs.carousel.$el.clientWidth,this.height=this.width/(1024/896)}},filters:{coordinates:function(t){return"(".concat(t[0],",").concat(t[1],",").concat(t[2],")")}},mounted:function(){this.$nextTick((function(){this.updateSize(),window.addEventListener("resize",this.updateSize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.updateSize)}},p=l,d=(i("1441"),i("2877")),m=Object(d["a"])(p,o,r,!1,null,null,null),h=m.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reputation-reward-item"},[e("div",{staticClass:"reputation-reward-title"},[t._v(t._s(t.reward.level))]),e("div",{staticClass:"reputation-reward-list"},t._l(t.reward.list,(function(t,i){return e("item-icon",{key:i,staticClass:"u-item-icon",attrs:{item_id:t.id,amount:t.amount,onlyIcon:!0,size:28}})})),1)])},f=[],_=i("dcab"),g={name:"RewardItem",props:{reward:{type:Object}},components:{ItemIcon:_["a"]},data:function(){return{}},methods:{},computed:{}},b=g,w=(i("ba41"),Object(d["a"])(b,v,f,!1,null,null,null)),C=w.exports,y=i("34f8"),k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-servant-wrap"},[e("div",{staticClass:"servant-content"},[e("div",{staticClass:"servant-image"},[e("img",{attrs:{src:t.info.image}}),e("div",{staticClass:"buff-info"},[e("p",[t._v("知交祝福：【 "+t._s(t.info.szBuffName)+" 】")]),e("p",[t._v(t._s(t.info.szBuffDesc))])])]),e("div",{staticClass:"servant-list"},[e("div",{staticClass:"servant-item"},[e("p",{staticClass:"u-subtitle"},[t._v("【获取条件】")]),e("p",{staticClass:"servant-desc"},[t._v(t._s(t.info.level))])]),e("div",{staticClass:"servant-item"},[e("p",{staticClass:"u-subtitle"},[t._v("【知交名字】")]),e("p",{staticClass:"servant-desc"},[t._v(t._s(t.info.szNpcName))])]),e("div",{staticClass:"servant-item"},[e("p",{staticClass:"u-subtitle"},[t._v("【知交简介】")]),e("p",{staticClass:"servant-desc"},[t._v(t._s(t.info.szDescBrief))])]),e("div",{staticClass:"servant-item"},[e("p",{staticClass:"u-subtitle"},[t._v("【知交故事】")]),e("p",{staticClass:"servant-desc",domProps:{innerHTML:t._s(t.info.szDescPersonality.replace(/\\n/g,"<br>"))}})])])])])},I=[],z={name:"ServantInfo",props:["info"]},D=z,N=(i("986f"),Object(d["a"])(D,k,I,!1,null,null,null)),S=N.exports,x=i("5841"),L=i("8ae2"),O=i("9616"),j=i("1b86"),P=i("85e4"),R=i("4238"),$=i("23d8"),M={name:"reputationSingle",components:{reputationMap:h,RewardItem:C,SearchInput:y["a"],servantInfo:S,Comment:$["a"]},data:function(){return{wiki_post:{source:{},post:null},compatible:!1,is_empty:!0,activeTab:"dialog",reputation:{dwForceID:-1,szName:"",szDesc:""},loading:!1}},methods:{getServant:function(t){return t?Object(n["a"])({level:"声望达到“".concat(this.getLevelDesc(t.nRequiredRepuLevel),"”即可获得"),image:this.getIcon(t.szImagePath,"partner")},t):{}},getPath:function(t){return x.find((function(e){return e.reputations.includes(t)}))?x.find((function(e){return e.reputations.includes(t)})).path:""},getIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"icon",i=t?t.split("\\")[t.split("\\").length-1].split(".")[0]:"",a="reputation/reputation/std/"+e+"/";return i?u["__imgPath"]+a+i.toLowerCase()+".png":""},getLevelDesc:function(t){return L.find((function(e){return e.level===Number(t)}))?L.find((function(e){return e.level===Number(t)})).name:"未知"},getData:function(){var t=this;this.loading=!0,Object(R["a"])({id:this.id,client:this.client}).then((function(e){var i=e.data;i.szDesc=i.szDesc.replace(/\\n/g,"<br>"),i.gainList=i.GainDesc?i.GainDesc.map((function(e){return{level:"《".concat(t.getLevelDesc(e.from)," - ").concat(t.getLevelDesc(e.to),"》"),desc:e.desc}})):[],i.rewards=i.RewardItems?Object.keys(i.RewardItems).map((function(e){return{level:"【".concat(t.getLevelDesc(e),"】声望奖励："),list:i.RewardItems[e].map((function(t){return{id:t,amount:1}}))}})):[],i.points=[{mapId:i.szMapIDs,guides:i.Guides&&i.Guides.length&&i.Guides[0]}],t.reputation=i})).finally((function(){t.loading=!1})).catch((function(){t.loading=!1}))},handleTabClick:function(t,e){var i=this;"map"==t.name&&setTimeout((function(){i.$refs.map&&i.$refs.map.updateSize()}),100)},loadData:function(){var t=this;this.id&&j["a"].mix({type:"reputation",id:this.id,client:this.client},{supply:1}).then((function(e){var i=e.post,a=e.source,s=e.compatible,n=e.isEmpty,o=e.users;t.wiki_post={post:i,source:a,users:o},t.is_empty=n,t.compatible=s})),this.triggerStat()},loadRevision:function(){var t=this;j["a"].getById(this.post_id,{type:"reputation"}).then((function(e){var i;t.wiki_post=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data})),this.triggerStat()},publish_url:P["publishLink"],triggerStat:function(){"origin"==this.client?Object(O["c"])("origin_reputation",this.id):Object(O["c"])("reputation",this.id)}},mounted:function(){this.getData(),this.post_id?this.loadRevision():this.loadData()},computed:{id_str:function(){return String(this.id)},id:function(){return parseInt(this.$route.params.reputation_id)},showMap:function(){return this.reputation.szMapIDs},showDialog:function(){return this.reputation.servant},showReward:function(){return this.reputation.RewardItems},showPath:function(){return this.reputation.gainList&&this.reputation.gainList.length},client:function(){return this.$store.state.client},post_id:function(){return this.$route.params.post_id},isRevision:function(){return!!this.$route.params.post_id},author_id:function(){var t,e;return~~(null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.user_id)},user_name:function(){var t,e;return null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.user_nickname},updated_at:function(){var t,e;return Object(P["ts2str"])(null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.updated)},fav_title:function(){var t,e;return null===(t=this.wiki_post)||void 0===t||null===(e=t.source)||void 0===e?void 0:e.Name},authors:function(){var t,e,i;return this.isRevision?[]:(null===(t=this.wiki_post)||void 0===t||null===(e=t.users)||void 0===e||null===(i=e.filter((function(t){return t.id})))||void 0===i?void 0:i.map((function(t){return{user_id:t.id,user_avatar:t.avatar,display_name:t.nickname}})))||[]}},watch:{id:function(){this.getData(),this.loadData()},post_id:{handler:function(){this.loadRevision()}},showDialog:function(){this.reputation.servant||(this.activeTab="map")}}},T=M,B=(i("b22b"),Object(d["a"])(T,a,s,!1,null,null,null));e["default"]=B.exports},5841:function(t){t.exports=JSON.parse('[{"path":"各大主城和阵营","reputations":["扬州","洛阳","长安","恶人谷","浩气盟"]},{"path":"各大门派","reputations":["少林","万花","天策","纯阳","七秀","藏剑","五毒","唐门","明教","丐帮","苍云","蓬莱","长歌","霸刀","凌雪阁","衍天宗","北天药宗"]},{"path":"风起稻香","reputations":["东漓寨","天道轩","昆仑","刀宗·披星阁","隐元会","南洋商会","镖局联盟"]},{"path":"巴蜀风云","reputations":["轩辕社","藏经阁","霸刀·南离营","大理宫","塔纳","祝融殿","天南王家","拜火教","九黎族","塔纳离恨冢","无愧南灵","段氏山城"]},{"path":"安史之乱·上","reputations":["朔方军","义军","琅琊颜氏","大唐兵部","李唐皇室","凌烟阁","潼关守备军","屠狼会","军器监","英灵殿","刹那千年","墨氏门徒","靖世军·忠","西域商会","靖世军·义","大燕长安府"]},{"path":"安史之乱·下","reputations":["隐元天部","太初陵社","长安富豪","太原守军·龙城飞将","太原守军·烽火北望","江南叶商行","灵武先锋军","太原义士","武林盟","建宁铁卫","河东商会","太原联军"]},{"path":"剑胆琴心·上","reputations":["回纥商队","黑水城","淮南商行","无遮会","阴山集市","觅宝会漠西部","恶人谷细柳堂","浩气盟新雨阁","隐贤居","白云会","名僧会","觅音明心园","商会·玉带楼","源氏·狩魂组","永安行","凌云会"]},{"path":"剑胆琴心·下","reputations":["霸刀·塞北营","郭子仪部·靖武","精金阁","洛阳光复联军·荡寇","洛阳光复联军·旌表","扬名擂","北山会·怒涛堂","北山会·弄影堂","五毒·圣蝎殿","隐元会·天玄阁风部","霸刀山庄·驭海堂","独孤世家·九军","恶人谷惊风院","浩气盟霜雷殿","丐帮·忠义堂","霸刀山庄·止戈堂"]},{"path":"世外蓬莱","reputations":["侠客岛","经首道源尹氏","洞天福地康氏","渤海国","恶人谷扬威殿","浩气盟镇远堂","冰火岛","康氏泥兰园","侠客岛·姜氏","贺氏商会","东海丐帮分舵","靖海盟","周天哨","东海霸王擂","佑海盟","浩气盟平涛阁","恶人谷驭帆堂","南溟船队","太子卫率府"]},{"path":"奉天证道","reputations":["浩气盟兴节殿","恶人谷断仇殿","七秀·碧霞会","少林·罗汉堂","万花·同心盟","达摩洞","藏剑·祭剑堂","江虞盟军","漳水营","百蛊殿","佑阳联军"]}]')},"75e4":function(t,e,i){},"7fcd":function(t,e,i){"use strict";i("a00d")},"8ae2":function(t){t.exports=JSON.parse('[{"level":-1,"name":"全部等级","icon":"","color":196},{"level":0,"name":"仇恨","icon":"","color":196},{"level":1,"name":"敌视","icon":"","color":196},{"level":2,"name":"疏远","icon":"","color":162},{"level":3,"name":"中立","icon":"","color":162},{"level":4,"name":"友好","icon":"","color":165},{"level":5,"name":"亲密","icon":"","color":165},{"level":6,"name":"敬重","icon":"","color":165},{"level":7,"name":"尊敬","icon":"","color":165},{"level":8,"name":"钦佩","icon":"","color":165},{"level":9,"name":"显赫","icon":"","color":165},{"level":10,"name":"崇敬","icon":"","color":163},{"level":11,"name":"崇拜","icon":"","color":163},{"level":12,"name":"传说","icon":"","color":163}]')},"986f":function(t,e,i){"use strict";i("e732")},a00d:function(t,e,i){},ac10:function(t,e,i){},b22b:function(t,e,i){"use strict";i("cb5a0")},ba41:function(t,e,i){"use strict";i("ac10")},bb23:function(t,e,i){"use strict";i("e2f3")},cb5a0:function(t,e,i){},dcab:function(t,e,i){"use strict";i("99af");var a=function(){var t=this,e=t._self._c;return e("el-popover",{staticClass:"u-item",attrs:{placement:"right-start",trigger:"hover","visible-arrow":!1,"popper-class":"u-item__popup"}},[e("template",{slot:"reference"},[e("div",{staticClass:"u-item__warpper",class:{background:!t.onlyIcon}},[t.onlyName?t._e():e("a",{staticClass:"u-item-icon",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{target:"_blank",href:t.getLink("item",t.source.id)}},[e("img",{staticClass:"u-item-icon__img",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{src:t.iconLink(t.source.IconID)}}),e("div",{staticClass:"u-item-icon__quality",style:{backgroundImage:t.item_border(t.source),opacity:5==t.source.Quality?.9:1}}),e("div",{staticClass:"u-item-icon__quest",style:{backgroundImage:t.item_border_quest(t.source)}}),1!==t.display_amount?e("span",{staticClass:"u-item-icon__count"},[t._v(t._s(t.display_amount))]):t._e()]),t.onlyIcon?t._e():e("div",{staticClass:"u-item-name",class:"e-jx3-item__q".concat(t.source.Quality)},[t._v(" "+t._s(t.source.Name)+" ")])])]),e("jx3-item",{attrs:{item:t.source}})],2)},s=[],n=(i("a9e3"),i("b64b"),i("e9c4"),i("c7fa")),o=i("4ae4"),r=i("85e4"),c=i("65c2"),u={name:"ItemIcon",data:function(){return{source:{},real_id:null,maybeBook:!1}},components:{"jx3-item":n["a"]},props:{size:{type:Number,default:28},item_id:{type:String,default:null},amount:{type:Number,default:1},onlyName:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1}},methods:{get_data:function(t){var e=this;t&&Object(o["a"])(t,this.client).then((function(t){var i=t.data,a=i.data.item;Object.keys(a).length&&(e.source=a,sessionStorage.setItem(e.cache_key,JSON.stringify(a)))})).catch((function(t){var i;400==(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.code)&&!1===e.maybeBook&&(e.maybeBook=!0,e.real_id="".concat(e.item_id,"_").concat(e.amount))}))},iconLink:r["iconLink"],getLink:r["getLink"],item_border_quest:function(t){return t.IsQuest>0?"url(".concat(c["__imgPath"],"image/item/renwu.png)"):""},item_border:function(t){switch(t.Quality){case 3:return"url(".concat(c["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(c["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(c["__imgPath"],"image/item/orange.gif)");default:return""}}},computed:{client:function(){return this.$store.state.client},cache_key:function(){return"item-".concat(this.client,"-").concat(this.real_id)},display_amount:function(){return!1===this.maybeBook?this.amount:1}},watch:{real_id:{immediate:!0,handler:function(){var t=sessionStorage.getItem(this.cache_key);if(t)try{this.source=JSON.parse(t)}catch(e){console.log(e,"[Item]无法解析本地缓存"),this.get_data(this.real_id)}else this.get_data(this.real_id)}}},mounted:function(){this.real_id=this.item_id}},l=u,p=(i("bb23"),i("2877")),d=Object(p["a"])(l,a,s,!1,null,null,null);e["a"]=d.exports},e2f3:function(t,e,i){},e732:function(t,e,i){}}]);
//# sourceMappingURL=chunk-427494f0.9908a2a8.js.map