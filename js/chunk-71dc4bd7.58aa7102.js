(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71dc4bd7"],{"0a7c":function(t,e,n){},"27ba":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("ac1f"),n("841c");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-result"},[e("div",{staticClass:"u-input"},[e("el-input",{attrs:{placeholder:"输入任务关键字（可包括中括号），「回车」进行搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.pushRoute()}},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[e("template",{slot:"prepend"},[e("span",[t._v("关键词")])]),e("el-button",{attrs:{slot:"append"},on:{click:function(e){return t.pushRoute()}},slot:"append"},[e("i",{staticClass:"el-icon-search"})])],2),e("el-tooltip",{attrs:{content:"查看任务链需要键入完整任务名或任务ID哦",placement:"top"}},[e("el-checkbox",{on:{change:function(e){return t.pushRoute()}},model:{value:t.checkChain,callback:function(e){t.checkChain=e},expression:"checkChain"}},[t._v("查看任务链")])],1)],1),t._m(0),t.resultIsObject?[t.result.prev&&t.result.prev.length>0?[e("el-divider",[e("i",{staticClass:"el-icon-star-off"}),t._v(" 前置分支")]),t._l(t.result.prev,(function(t){return e("quest-card",{key:t.id,attrs:{quest:t}})}))]:t._e(),t.result.current&&t.result.current.length>0?[t.result.current.length>0?e("el-divider",[e("i",{staticClass:"el-icon-star-off"}),t._v(" 任务链条")]):t._e(),t._l(t.result.current,(function(n){return e("quest-card",{key:n.id,class:{current:n.name==t.keyword},attrs:{quest:n}})}))]:t._e(),t.result.branch&&t.result.branch.length>0?[e("el-divider",[e("i",{staticClass:"el-icon-star-off"}),t._v(" 任务分支")]),t._l(t.result.branch,(function(t){return e("quest-card",{key:t.id,attrs:{quest:t}})}))]:t._e(),t.result.byId&&t.result.byId.length>0?[e("el-divider",[e("i",{staticClass:"el-icon-star-off"}),t._v(" 任务ID匹配")]),t._l(t.result.byId,(function(t){return e("quest-card",{key:t.id,attrs:{quest:t}})}))]:t._e(),t.result.byItem&&t.result.byItem.length>0?[e("el-divider",[e("i",{staticClass:"el-icon-star-off"}),t._v(" 物品匹配")]),t._l(t.result.byItem,(function(t){return e("quest-card",{key:t.id,attrs:{quest:t}})}))]:t._e(),t.result.byKeyword&&t.result.byKeyword.length>0?[e("el-divider",{staticClass:"u-result-hr"},[e("i",{staticClass:"el-icon-star-off"}),t._v(" 模糊搜索结果")]),t._l(t.result.byKeyword,(function(t){return e("quest-card",{key:t.id,attrs:{quest:t}})}))]:t._e()]:t._e(),e("el-pagination",{staticStyle:{"text-align":"center","margin-top":"1.5rem"},attrs:{"hide-on-single-page":"",background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.search}})],2)},c=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"result-head"},[e("div",[t._v("起始地图")]),e("div",[t._v("任务名称")]),e("div",[t._v("可接等级")]),e("div",[t._v("任务目标")]),e("div",[t._v("任务奖励")])])}],a=n("9622"),s=(n("d81d"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"quest-card",on:{click:function(e){return t.go(t.quest.id)}}},[e("div",[t._v(t._s(t.quest.map))]),e("div",[e("span",[e("span",{staticClass:"quest-name",style:t.questNameColor},[t._v(t._s(t.quest.name))]),t.quest.schoolName?e("el-tooltip",{attrs:{content:"该任务仅 ".concat(t.quest.schoolName," 门派可接取"),placement:"top"}},[e("img",{staticClass:"quest-school",attrs:{src:t.schoolIcon(t.quest.schoolName),alt:""}})]):t._e()],1),e("span",{staticClass:"u-id"},[t._v("（ID："+t._s(t.quest.id)+"）")])]),e("div",[t._v(t._s(t.quest.level))]),e("div",{staticClass:"u-target"},[t._v(t._s(t.quest.target))]),e("div",[e("div",{staticClass:"text-reward"},[t._v(" "+t._s(t._f("rewardFilter")(t.quest.reward))+" ")]),e("div",{staticClass:"item-reward"},t._l(t.items,(function(t){return e("item-icon",{key:t.id,attrs:{item_id:t.id,amount:t.amount,onlyIcon:!0,size:28}})})),1)])])}),r=[],o=n("2909"),u=n("b85c"),l=(n("4de4"),n("d3b7"),n("99af"),n("a15b"),n("fb6a"),n("8e3a")),d={name:"QuestCard",components:{ItemIcon:l["a"]},props:{quest:{type:Object,required:!0}},methods:{go:function(t){this.$router.push({name:"single",params:{quest_id:t}})},schoolIcon:function(t){var e={"北天药宗":"药宗","凌雪阁":"凌雪","衍天宗":"衍天"};return e[t]&&(t=e[t]),"https://img.jx3box.com/image/school/".concat(t,".png")}},filters:{rewardFilter:function(t){return t=t.filter((function(t){return"item_group"!=t.type})).map((function(t){if("money"==t.type){var e=t.count,n="",i={zhuan:Math.floor(.01*e*.01*1e-4)||0,jin:Math.floor(.01*e*.01%1e4)||0,yin:Math.floor(.01*e%100)||0,tong:Math.floor(e%100)||0};return i["zhuan"]&&(n+="".concat(i["zhuan"],"砖")),i["jin"]&&(n+="".concat(i["jin"],"金")),i["yin"]&&(n+="".concat(i["yin"],"银")),i["tong"]&&(n+="".concat(i["tong"],"铜")),"金钱：".concat(n)}return"exp"==t.type?"阅历：".concat(t.count):"justice"==t.type?"侠行点：".concat(t.count):"prestige"==t.type?"威名点：".concat(t.count):"tongFund"==t.type?"帮会资金：".concat(t.count):"vigor"==t.type?"精力：".concat(t.count):"tongResource"==t.type?"载具资源：".concat(t.count):"affect"==t.type?"声望：".concat(t.force).concat(t.count>0?"+":"").concat(t.count):"achievement"==t.type?"成就：".concat(t.name):"train"==t.type?"修为：".concat(t.count):void 0})).filter((function(t){return void 0!=t})),t.join("\n")}},computed:{items:function(){if(!this.quest.reward||0==this.quest.reward.length)return[];var t,e=this.quest.reward.filter((function(t){return"item_group"==t.type})),n=[],i=Object(u["a"])(e);try{for(i.s();!(t=i.n()).done;){var c=t.value;n.push.apply(n,Object(o["a"])(c.items))}}catch(a){i.e(a)}finally{i.f()}return n.slice(0,7)},questNameColor:function(){var t={common:"#0d0e0d",repeat:"#0366d6",act:"#7632ff"};return{color:t[this.quest.questType]}}}},h=d,p=(n("318c"),n("4a26"),n("2877")),m=Object(p["a"])(h,s,r,!1,null,null,null),f=m.exports,_={name:"SearchResult",components:{QuestCard:f},data:function(){return{input:"",checkChain:!1,total:1,pageSize:10,result:{}}},mounted:function(){this.input=this.keyword,this.checkChain=this.chain,this.search()},methods:{pushRoute:function(){this.$router.push({name:"result",query:{keyword:this.input,chain:this.checkChain}})},search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(a["c"])({keyword:this.keyword,chain:this.chain,class_id:this.class_id,map_id:this.map_id,client:this.client,page:e}).then((function(e){t.result=e.data.list,t.total=e.data.total,t.pageSize=e.data.per}))}},computed:{keyword:function(){return this.$route.query.keyword},chain:function(){return this.$route.query.chain},class_id:function(){return this.$route.query.class_id},map_id:function(){return this.$route.query.map_id},watchId:function(){return this.keyword+this.chain+this.class_id+this.map_id},resultIsObject:function(){return this.result instanceof Object},client:function(){return this.$store.state.client}},watch:{watchId:function(){this.search()}}},y=_,v=(n("9896"),Object(p["a"])(y,i,c,!1,null,null,null));e["default"]=v.exports},"318c":function(t,e,n){"use strict";n("cb0e")},"3de1":function(t,e,n){},"4a26":function(t,e,n){"use strict";n("7f58")},"518e":function(t,e,n){"use strict";n("0a7c")},"7f58":function(t,e,n){},"8e3a":function(t,e,n){"use strict";n("99af");var i=function(){var t=this,e=t._self._c;return e("el-popover",{staticClass:"item",attrs:{placement:"right-start",trigger:"hover","visible-arrow":!1,"popper-class":"item-icon-popup"}},[e("template",{slot:"reference"},[e("div",{staticClass:"item-div",class:{background:!t.onlyIcon}},[t.onlyName?t._e():e("a",{staticClass:"item-icon",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{target:"_blank",href:"https://".concat("std"==t.client?"www":"origin",".jx3box.com/item/#/view/").concat(t.source.id)}},[e("img",{staticClass:"item-img",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{src:t.iconLink(t.source.IconID)}}),e("div",{staticClass:"border",style:{backgroundImage:t.item_border(t.source),opacity:5==t.source.Quality?.9:1}}),e("div",{staticClass:"border-quest",style:{backgroundImage:t.item_border_quest(t.source)}}),1!==t.amount?e("span",{staticClass:"item-count"},[t._v(t._s(t.amount))]):t._e()]),t.onlyIcon?t._e():e("div",{staticClass:"item-name",class:"e-jx3-item-q".concat(t.source.Quality)},[t._v(" "+t._s(t.source.Name)+" ")])])]),e("jx3-item",{attrs:{item:t.source}})],2)},c=[],a=(n("a9e3"),n("b64b"),n("e9c4"),n("c7fa")),s=n("4ae4"),r=n("85e4"),o=n("65c2"),u={name:"ItemIcon",data:function(){return{source:{}}},components:{"jx3-item":a["a"]},props:{size:{type:Number,default:28},item_id:{type:String,default:null},amount:{type:Number,default:1},onlyName:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1}},methods:{get_data:function(t){var e=this;t&&Object(s["a"])(t,this.client).then((function(t){var n=t.data,i=n.data.item;Object.keys(i).length&&(e.source=i,localStorage.setItem(e.cache_key,JSON.stringify(i)))})).catch((function(){e.source={}}))},iconLink:r["iconLink"],item_border_quest:function(t){return t.IsQuest>0?"url(".concat(o["__imgPath"],"image/item/renwu.png)"):""},item_border:function(t){switch(t.Quality){case 3:return"url(".concat(o["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(o["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(o["__imgPath"],"image/item/orange.gif)");default:return""}}},computed:{client:function(){return this.$store.state.client},cache_key:function(){return"item-".concat(this.client,"-").concat(this.item_id)}},watch:{item_id:{immediate:!0,handler:function(){var t=localStorage.getItem(this.cache_key);if(t)try{this.source=JSON.parse(t)}catch(e){console.log(e,"[Item]无法解析本地缓存"),this.get_data(this.item_id)}else this.get_data(this.item_id)}}}},l=u,d=(n("518e"),n("2877")),h=Object(d["a"])(l,i,c,!1,null,null,null);e["a"]=h.exports},9896:function(t,e,n){"use strict";n("3de1")},a15b:function(t,e,n){"use strict";var i=n("23e7"),c=n("e330"),a=n("44ad"),s=n("fc6a"),r=n("a640"),o=c([].join),u=a!=Object,l=r("join",",");i({target:"Array",proto:!0,forced:u||!l},{join:function(t){return o(s(this),void 0===t?",":t)}})},cb0e:function(t,e,n){}}]);
//# sourceMappingURL=chunk-71dc4bd7.58aa7102.js.map